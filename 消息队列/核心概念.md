## `JMS`

### `Java Message Serveice` <`java` 消息服务>

`JMS`是`java`的一套标准`API`，目的是为了使应用程序访问现有的MOM系统。(`MOM Message Oriented Middleware`,消息中间件指的是利用高效可靠的数据传递机制来进行平台无关的数据交流， 并基于数据通信来进行分布式的集成)。

基于`JMS`标准实现的MOM系统，又被称为`JMS provider`

### 面向消息中间件 <MOM>

面向消息中间件是一种支持在分布式系统中发送和接收消息软件和硬件的基础设施。通过非对称平台，MOM让应用模块成为分布式，同时减少可开发跨操作系统和网络接口应用的复杂度。

#### 优势

+ 异步
+ 路由
+ 解耦

#### 不足

+ 性能
+ 可靠性
+ 复杂

### JMS 元素

#### JMS 提供方 （Provider） 实现JMS接口的MOM

#### JMS 客户端 （Client） 生产者或者消费者的应用或进程

#### JMS生产者 （Producer） 创建和发送消息的JMS客户端

####  JMS消费者 （Consumer） 接收消息的JMS客户端

#### JMS消息 （Message） JMS客户端之间传输的数据对象

#### JMS队列 (Queue)  包含待读取消息的准备区域

#### JMS 主题 （Topic） 发布消息的分布机制

### JMS消息

#### 消息头

所有消息支持相同的头字段集合，头字段包含客户端 和提供方识别和路由消息的数据。

#### 消息属性

除标准的头字段以外， 提供一种内建机制来添加可选的消息头字段。

#### 消息主体

JMS定义了多种消息主体类型，覆盖了主要的消息风格。

### JMS消息头字段

#### JMSDestination：消息发送目的地

#### JMSDeliveryMode：消息传递模式

#### JMSMessageID：消息ID

#### JMSTimestamp：消息发送时间戳

#### JMSCorrelationID：提供方特殊ID、应用特殊ID和提供方本地字节数组值

#### JMSReplyTo：消息回复地址，说明消息期待回复，可选值

#### JMSRedelivered：消息重投递标识

#### JMSType：消息客户端发送消息时的类型标识

#### JMSExpiration：消息过期

#### JMSPriority：消息优先级

### JMS消息主体

JMS提供五种消息主体的形式，每种形式通过消息接口定义

#### StreamMessage

消息整体主体包含流式Java原生值，它是连续地被填充和读取的。

#### MapMessage

消息整体主体包含键值对集合，其中键为字符串，值为Java原生类型。条目访问可被计算器连续地或者名称随机地访问，它的顺序并不一定。

#### TextMessage

  消息整体主体包含一个Java String 对象。

#### ObjectMessage

消息整体主体包含一个Serializable 对象，如果需要使用集合对象，确保JDK 1.2或更高。

#### BytesMessage

### JMS消息确认

所有JMS消息支持acknowledge方法的使用，

### JMS消息模型

#### 点对点模型

#### 发布订阅模型



## 高级消息队列协议 （AMQP）

高级消息队列协议是一种针对面向消息中间件的开放标准应用层协议，定义了面向消息、队列、路由、可靠性和安全性等特性。



## 消息队列

### 消息

消息是两台计算机传递的数据单位，消息可以非常简单，例如只包含字符串，也可以比较复杂，可能包含嵌入对象。

### 消息队列

消息队列是在消息传输的过程中保存消息的容器，消息队列管理器在将消息从他的源中寄到它的 目标时充当中间人，主要作用是提供路由并保证消息的传递，如果传递时接收方不可用，消息队列会保留消息，直到可以成功传递他。

消息队列的主要特点是异步处理，主要目的是减少请求时间和解耦，所以主要的使用场景是将比价耗时而且不需要即使返回结果的操作作为消息放入消息队列。同时由于使用了消息队列，只要保证消息的格式不变，消息的接收方和发送方并不需要彼此联系，实现了解耦。

### 消息队列和应用程序之间的关系

多个生产者可以将消息发送到同一个队列中，多个消费者也可以从同一个消息队列中接收数据。